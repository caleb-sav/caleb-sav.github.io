Mechanical Design
===============================================================

Unlike previous class projects, most hardware hardware was not provided, or even specified. 
This gave us the opportunity to design the entire system from the ground up. The Nucleo L476, 
motor drivers, and motors were made available to us by our instructor, guiding some design 
decisions, but the rest was up to us.

Inspired by similarly designed 3D printers, we quickly decided on a triangulating design, where 
two 'arms' are allowed to pivot freely, locating the pen by their different lengths.

.. image:: ../Images/prelimSketch1.jpg
   :width: 3 in
   :align: center
   
We considered a number of different ways to control the length of the arms. We thought of power 
screws, but balked at the complexity of driving the shaft, while still maintaining a stable 
connection to the static pen.

.. image:: ../Images/prelimSketch2.jpg
   :width: 3 in
   :align: center
   
A rack and pinion seemed like a good option since the rack doesn't rotate, but it posed a 
significant manufacturing challenge and could incur too much slop. We considered a smooth 
rod with rubber rollers, but were concerned with slipping. 

Finally, we found a way to blend the best of these ideas into one using a power screw, but 
instead of rotating the shaft, we planned to rotate the nut.

**[Image here of the final sketch]**




Analysis
---------
The bulk of the math involved for this project was in the kinematics. Getting from arm lengths 
to X Y coordinates was straightforward, but going back the other way is not. Fortunately, 
the Newton-Raphson algorithm can help with this, iteratively applying input values to the 
forward kinematics until X Y outputs reach the target. More information on this algorithm 
can be found in the **[insert link for taskData]** task, but the building blocks (forward 
kinematics and the jacobian) are derived below.

.. image:: ../Images/handCalcs1.jpg
.. image:: ../Images/handCalcs2.jpg
.. image:: ../Images/handCalcs3.jpg
.. image:: ../Images/handCalcs4.jpg

CAD
--------
Stuff on CAD


Manufacturing
-------------

BOM
^^^^^
Create a bill of materials

Our instructor provided the microcontroller used for the project: the Nucleo L476 equiped 
with a 'Shoe of Brian' for accessing the native USB. 

Motor Driver Board
^^^^^^^^^^^^^^^^^^
A motor driver PCB was also provided with an two integrated TMC4210 Step/Direction 
controllers and pin headers for standard stepper motor drivers (TMC2208 in this case).

.. image:: ../Images/driverSchem.png
.. image:: ../Images/driverBuilt.jpg

Motor Modification
^^^^^^^^^^^^^^^^^^
While some teams chose to purchase their own stepper motors, we decided to use the ones 
made available by our instructor. They appear to be 5- and 6-wire variants of the NMB 
PM25S-048, likely surplus or refurbished condition.